@use "sass:map";
@use "../abstracts/mixins"as mixins;
@use "../abstracts/tokens"as tokens;

// On smaller screens, displays a full-screen nav column when hamburger is clicked
.nav {
    display: none;
    height: 100svh;
    flex-direction: column;

    &__inner {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        gap: var(--gutter-h);
    }

    &__link {
        @include mixins.text(h2);
        color: var(--nav);
        font-family: var(--font-serif);
        text-decoration: none;
        background: none;
        border: none;

        &:hover,
        &:focus-visible {
            color: var(--nav-hover);
            outline: none;
        }

        &--contact {
            background-color: var(--button-bg);
            color: var(--text);
            align-self: center;
            margin-top: auto;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5em 1.25em;
            border-radius: 9999px;
            font-weight: 600;
            text-align: center;
            white-space: nowrap;
            transition: background-color 0.2s ease, transform 0.1s ease;

            &:hover,
            &:focus-visible {
                background-color: var(--button-bg-hover);
                color: var(--text);
                outline: none;
            }
        }
    }
}

// Displays a nav row on wider screens
@media (orientation: landscape) and (min-width: map.get(tokens.$breakpoints, tablet)) {
    .nav {
        width: calc(#{map.get(tokens.$breakpoints, desktop)} / 2.5);
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        min-width: 0;
        gap: var(--gutter);
        height: var(--gutter-h);

        &__inner {
            width: 100%;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            gap: var(--gutter);
            flex: 1 1 100%;
        }

        &__link {
            @include mixins.text-static(18, true);

            &--contact {
                margin-top: 0;
            }

        }
    }
}

// Opens the nav menu and prevents page scrolling
.is-nav-open {
    overflow: hidden;

    .nav {
        display: flex;
        position: fixed;
        inset: 0;
        background: var(--bg-nav);
        flex-direction: column;
        gap: 0;
        z-index: 1000;
        justify-content: center;
        align-items: center;

    }
}

.is-nav-open .panel,
.is-nav-open .panel--hero {
  padding-inline: 0 !important;
  padding-block: 0 !important;
}

.is-nav-open .hamburger {
  position: absolute;
  top: 24px;
  right: var(--margin);
}

.is-nav-open .topbar {
  margin: 0;
  height: 100svh !important;
}

.is-nav-open .hero__title,
.is-nav-open .hero__subtitle,
.is-nav-open .hero__explore,
.is-nav-open .hero__arrow,
.is-nav-open .featured {
  opacity: 0 !important;
  transform: translateY(10px);
  transition: none !important;
}

@media (max-height: #{map.get(tokens.$breakpoints, mobile-guard)}) {

    .hamburger {
        display: block;
    }

    .nav {
        display: none;
        width: 100%;
        height: var(--gutter-h);
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: var(--gutter);
    }

    .is-nav-open .nav {
        display: flex;
        position: fixed;
        inset: 0;
        background: var(--bg-nav);
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: var(--gutter);
        z-index: 2000;
        margin: 0;
    }

    .is-nav-open .nav__inner {
        flex-direction: row;
        justify-content: center;
        align-items: center;
        gap: var(--gutter);
    }

    @media (max-width: 750px) {
        .nav__link {
            @include mixins.text(nav-sm);
        }
    }

    @media (min-width: 751px) {
        .nav__link {
            @include mixins.text(nav);
        }
    }
}